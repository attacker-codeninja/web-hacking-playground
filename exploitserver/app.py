#!/usr/bin/env python3

"""Exploit Server"""

from time import sleep
from flask import Flask, render_template, request
from selenium import webdriver
from selenium.webdriver.common.by import By

app = Flask(__name__)

options = webdriver.ChromeOptions()
options.add_argument("--headless")
options.add_argument("--no-sandbox")
options.add_argument("--disable-dev-shm-usage")


@app.route("/", methods=["GET", "POST"])
def index():
    """Main page"""
    if request.method == "POST":
        if request.form["url"] and request.form["url"].startswith("http"):
            driver = webdriver.Chrome(options=options)
            driver.get("http://whp-socially/login")
            driver.find_element(By.ID, "username").send_keys("ares")
            driver.find_element(By.ID, "password").send_keys("7Z73j4EjwEhO6l9P")
            driver.find_element(By.ID, "login").click()
            sleep(3)
            driver.get(request.form["url"])
            driver.close()
    return render_template("index.html")


if __name__ == "__main__":
    app.run(host="0.0.0.0", port=80)
